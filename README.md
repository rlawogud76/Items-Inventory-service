# 디스코드 재고 관리 봇

마인크래프트 마을 재고를 실시간으로 관리하는 Discord 봇입니다.

## ✨ 주요 기능

- 📦 **실시간 재고 관리**: 재고 현황을 실시간으로 확인하고 관리
- 🔨 **제작 시스템**: 제작품 관리 및 레시피 시스템
- 👥 **작업자 관리**: 수집/제작 중인 사람 표시 및 중복 방지
- 📊 **프로그레스 바**: 진행률을 시각적으로 표시
- 🎨 **UI 커스터마이징**: 3가지 UI 모드 (일반/컴팩트/상세)
- 🔄 **자동 새로고침**: 5초 간격 자동 업데이트
- 📋 **수정 내역 추적**: 모든 변경사항 자동 기록 (최대 100개)
- 💾 **데이터 저장**: data.js 파일에 자동 저장 (Git 커밋으로 유지)

## 🚀 설치 방법

### 1. Node.js 설치
Node.js가 설치되어 있지 않다면 [nodejs.org](https://nodejs.org/)에서 다운로드하세요.

### 2. 패키지 설치
```bash
npm install
```

### 3. 디스코드 봇 생성

1. [Discord Developer Portal](https://discord.com/developers/applications)에 접속
2. "New Application" 클릭하고 봇 이름 입력
3. 왼쪽 메뉴에서 "Bot" 클릭
4. "Reset Token" 클릭해서 토큰 복사 (한 번만 보여집니다!)
5. "MESSAGE CONTENT INTENT" 활성화 (중요!)
6. 왼쪽 메뉴에서 "OAuth2" > "URL Generator" 클릭
7. Scopes에서 "bot" 선택
8. Bot Permissions에서 다음 권한 선택:
   - Send Messages
   - Embed Links
   - Read Message History
9. 생성된 URL로 봇을 서버에 초대

### 4. 환경 변수 설정

`.env.example` 파일을 `.env`로 복사하고 토큰 입력:

```bash
copy .env.example .env
```

`.env` 파일을 열어서 봇 토큰 입력:
```
DISCORD_TOKEN=여기에_복사한_토큰_붙여넣기
CLIENT_ID=여기에_클라이언트_ID_입력
```

### 5. 봇 실행
```bash
npm start
```

## 📝 명령어 목록

### 기본 명령어 (4개만 사용)

**`/재고 [카테고리]`**
- 재고 현황을 확인합니다 (모든 기능은 버튼으로 사용)
- 예: `/재고 카테고리:해양`

**`/제작 [카테고리]`**
- 제작 현황을 확인합니다 (모든 기능은 버튼으로 사용)
- 예: `/제작 카테고리:채광`

**`/수정내역 [개수]`**
- 재고 및 제작 수정 내역을 확인합니다
- 예: `/수정내역 개수:20`

**`/도움말`**
- 봇 사용법을 확인합니다

> 💡 **모든 관리 기능은 버튼으로 사용하세요!**
> `/재고` 또는 `/제작` 명령어를 실행하면 나타나는 버튼들로 모든 작업을 할 수 있습니다.

## 🎮 버튼 기능

- **📦 수집중 / 🔨 제작중**: 작업자를 등록하여 다른 사람들에게 알립니다
- **📊 수량관리**: 아이템 수량을 추가/수정/차감할 수 있습니다
- **📋 물품관리 / 📦 품목관리**: 물품/품목을 추가하거나 삭제할 수 있습니다
- **📋 레시피** (제작 전용): 레시피를 조회/수정/삭제할 수 있습니다
- **♻️ 초기화**: 개별 또는 일괄 초기화를 수행합니다
- **▶️ 자동새로고침**: 5초마다 자동으로 업데이트됩니다
- **📏 UI 모드**: 일반/컴팩트/상세 모드를 전환합니다
- **📊 바 크기**: 프로그레스 바 크기를 조절합니다 (25%~200%)

## 📊 재고 상태 표시

- 🔴 **빨간불**: 재고 부족 (25% 이하)
- 🟡 **노란불**: 재고 보통 (25% 초과 ~ 90% 미만)
- 🟢 **초록불**: 재고 충분 (90% 이상)


## 🚂 Railway 배포 (데이터 유지)

이 봇은 `data.js` 파일에 데이터를 저장합니다. 

### 데이터 유지 방법

1. **봇 사용 중 변경된 데이터를 저장하려면:**
   - Railway Shell 또는 로컬에서 `data.js` 파일 내용 확인
   - 변경사항을 Git에 커밋하고 푸시

2. **Railway Shell에서 데이터 확인:**
   ```bash
   cat data.js
   ```

3. **로컬에서 데이터 백업:**
   ```bash
   git pull
   ```

### 주의사항

- `data.js` 파일은 봇이 실행 중일 때 자동으로 업데이트됩니다
- Railway에서 재배포하면 마지막 Git 커밋 상태로 돌아갑니다
- 중요한 데이터는 정기적으로 Git에 커밋하세요

### 데이터 백업 권장 방법

```bash
# 1. Railway Shell에서 현재 데이터 확인
cat data.js

# 2. 로컬에서 data.js 파일 업데이트
# (Railway Shell 출력 내용을 복사해서 로컬 data.js에 붙여넣기)

# 3. Git에 커밋
git add data.js
git commit -m "데이터 백업"
git push

# 4. Railway에서 자동 재배포됨
```
