# 변경 이력

## 2024-01-21 - MongoDB 마이그레이션

### 🎉 주요 변경사항

#### 데이터 저장 방식 변경
- `data.js` → `MongoDB` 데이터베이스로 변경
- 클라우드 데이터베이스로 안정적인 데이터 관리
- 자동 마이그레이션 지원 (기존 data.js 데이터 자동 이전)

#### 기술 스택
- MongoDB + Mongoose ODM
- 싱글톤 패턴으로 단일 문서 관리
- Map 타입으로 동적 카테고리 지원

### 설정 방법
1. `.env` 파일에 `MONGODB_URI` 추가
2. MongoDB Atlas 또는 로컬 MongoDB 사용
3. 봇 실행 시 자동으로 data.js 데이터 마이그레이션

---

## 2024-01-21 - 이전 버전

### 🎉 주요 변경사항

#### 데이터 저장 방식 변경
- `inventory.json` → `data.js` 파일로 변경
- Git 커밋으로 데이터 유지 (Railway Volume 불필요)
- 봇 실행 중 자동 저장

#### 명령어 정리
**재고 관리**
- `/재고` - 재고 현황 확인
- `/재고물품추가` - 아이템 추가
- `/재고물품제거` - 아이템 제거

**제작 관리**
- `/제작` - 제작 현황 확인
- `/제작품목추가` - 제작품 추가 (레시피 포함)
- `/제작품목제거` - 제작품 제거

**레시피 관리**
- `/레시피조회` - 레시피 확인
- `/레시피수정` - 레시피 수정
- `/레시피삭제` - 레시피 삭제

**기타**
- `/수정내역` - 수정 내역 확인
- `/사용법` - 사용법 확인

#### 버튼 기능
- 📦 수집중 / 🔨 제작중: 작업자 등록
- 📊 수량관리: 추가/수정/차감
- 📋 물품관리 / 📦 품목관리: 추가/삭제
- 📋 레시피 (제작 전용): 조회/수정/삭제
- ♻️ 초기화: 개별/일괄 초기화
- ▶️ 자동새로고침: 5초 간격
- 📏 UI 모드: 일반/컴팩트/상세
- 📊 바 크기: 25%~200% 조절

#### 주요 기능
- ✅ 실시간 재고/제작 현황 확인
- ✅ 프로그레스 바로 진행률 시각화
- ✅ 세트(64개) 단위 수량 관리
- ✅ 작업자 등록 및 중복 방지
- ✅ 레시피 시스템 (자동 재료 차감)
- ✅ 수정 내역 추적 (최대 100개)
- ✅ 3가지 UI 모드 지원
- ✅ 데이터 자동 저장 (data.js)
- ✅ 자동 메시지 삭제 (15초)
- ✅ 한국 시간대 (UTC+9) 지원

### 🐛 버그 수정
- 수량 추가 시 카테고리 파싱 오류 수정
- 레시피 버튼 중복 메시지 오류 수정
- 모달 제출 시 상호작용 실패 오류 수정
- 타임스탬프 표시 오류 수정

### 📝 문서 업데이트
- README.md 전면 개편
- 사용법 명령어 업데이트
- 명령어 목록 정리
- 버튼 기능 상세 설명 추가

### 🚀 배포
- Railway 배포 지원
- Git 기반 데이터 유지
- 환경 변수 간소화

---

## 이전 버전

### 2024-01-20
- 레시피 관리 기능 추가
- 수량 관리 통합 (추가/수정/차감)
- 자동 메시지 삭제 기능
- 수정 내역 타임스탬프 수정

### 2024-01-19
- 초기 버전 개발
- 재고/제작 관리 기본 기능
- 버튼 인터페이스 구현
- 자동 새로고침 기능
